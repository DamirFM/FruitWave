<mat-card *ngIf="cart.items.length" class="max-w-7xl mx-auto">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 w-full">
    <!-- Columns and rows will be defined here -->
    <!-- 
ng-container is an Angular structural directive that acts as a container for elements and does not render any additional DOM element itself. -->
    <!-- Add an ng-container for the product column. -->
    <ng-container matColumnDef="product">
      <!-- Header Cell -->
      <!-- th stands for "table header".Used with th elements to define the styling and behavior of header cells in a Material table -->
      <th mat-header-cell *matHeaderCellDef>Product</th>
       <!-- Data Cell -->
      <!-- td stands for "table data". -->
      <!-- *matCellDef="let element" allows each cell to access the row data (element) and display the product image. -->
      <td mat-cell *matCellDef="let element">
        <img src="{{ element.product }}" alt="product" class="w-[100px] my-5" />
      </td>
      <!-- Footer Cell -->
      <!-- mat-footer-cell: Used with td elements to define the styling and behavior of footer cells in a Material table. -->
      <td mat-footer-cell *matFooterCellDef>
        <button mat-raised-button routerLink="/home">Continue Shopping</button>
      </td>
    </ng-container>
    <ng-container matColumnDef="category">

      <th mat-header-cell *matHeaderCellDef>Category</th>
      <td mat-cell *matCellDef="let element">
        {{ element.category }}
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
    <!-- Add an ng-container for the name column. -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let element">
        <span class="truncate max-w-xs block">{{ element.name }}</span>
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
    <!-- Add an ng-container for the price column. -->
    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef>Price</th>
      <td mat-cell *matCellDef="let element">{{ element.price | currency }}</td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
    <!-- Add an ng-container for the quantity column. -->
    <ng-container matColumnDef="quantity">
      <th mat-header-cell *matHeaderCellDef>Quantity</th>
      <td mat-cell *matCellDef="let element">
        <button 
        (click)="onRemoveQuantity(element)"
        mat-icon-button >
            <mat-icon>remove</mat-icon>
          </button>
        <span>{{ element.quantity }}</span>
        <button 
        (click)="onAddQuantity(element)"
        mat-icon-button >
            <mat-icon>add</mat-icon>
          </button>
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container>
        <!-- Add an ng-container for the quantity column. -->
    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef>Total</th>
      <td mat-cell *matCellDef="let element">
        {{ element.quantity * element.price | currency }}
      </td>
      <td mat-footer-cell *matFooterCellDef>
        <span class="font-bold py-5 block">{{
            getTotal( cart.items) | currency
          }}</span>
      </td>
    </ng-container>
    <!-- Add an ng-container for the action column. -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>
        <button
            (click)="onClearCart()"
            mat-raised-button
            color="warn"
            class="float-right"
          >
            Clear All
          </button>
      </th>
      <td mat-cell *matCellDef="let element">
        <button
        mat-icon-button color="warn" 
        (click)="onRemoveItem(element)"
          >
            <mat-icon>delete</mat-icon>
          </button>
      </td>
      <td mat-footer-cell *matFooterCellDef>
        <button
            (click)="onCheckout()"
            mat-raised-button
            [ngStyle]="{'color': '#4caf50'}"
            class="float-right"
          >
          Checkout
          </button>
      </td>
    </ng-container>

    <!-- This directive defines a header row for the table. The mat-header-row attribute specifies that this is a Material table header row. The *matHeaderRowDef directive binds the columns defined in displayedColumns to this header row, which Angular will render.  -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <!-- This directive defines a data row for the table. The mat-row attribute indicates that this is a Material table row. The *matRowDef directive binds the columns specified in displayedColumns to this row. The let row syntax allows each row to access its data, with Angular rendering the rows dynamically based on the provided data. -->
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    <!-- This directive defines a footer row for the table. The mat-footer-row attribute indicates that this is a Material table footer row. The *matFooterRowDef directive binds the columns in displayedColumns to this footer row, which Angular will render at the bottom of the table. -->
    <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
  </table>
</mat-card>
<mat-card *ngIf="!cart.items.length" class="mx-auto my-3 max-w-7xl">
  <p>
    Your cart is empty.
    <button mat-raised-button routerLink="/home">Start Shopping</button>
  </p>
</mat-card>
